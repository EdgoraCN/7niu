#!/usr/bin/env node

'use strict';

var command = require('ydr-utils').command;

var cmdHelp = require('../cmds/help.js');
var cmdVersion = require('../cmds/version.js');
var cmdUpload = require('../cmds/upload.js');
var cmdClear = require('../cmds/clear.js');
var cmdInit = require('../cmds/init.js');

command.alias({
    d: 'dirname',
    a: 'accessKey',
    s: 'secretKey',
    b: 'bucket'
});

command
    .if('help', cmdHelp)
    .if('version', cmdVersion)
    .if('upload', function (args) {
        cmdUpload({
            srcDirname: command.dirname(args, 'dirname'), 
            accessKey: command.dirname(args, 'accessKey'),
            secretKey: command.dirname(args, 'secretKey'),
            bucket: command.dirname(args, 'bucket')
        });
    })
    .if('clear', function (args) {
        cmdClear({
            srcDirname: command.dirname(args, 'dirname')
        });
    })
    .if('init', function (args) {
        cmdInit({
            srcDirname: command.dirname(args, 'dirname')
        });
    })
    .else(cmdHelp);

command.parse(process.argv);

